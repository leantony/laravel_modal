var leantony={};!function(o){leantony.utils={loadLink:function(o,t){o||(o=location.href),t?setTimeout(function(){window.location=o},t):window.location=o},processMessageObject:function(t){var n="";return"object"===o.type(t)?o.each(t,function(o,t){n+="<li>"+t[0]+"</li>"}):n+="<p>"+t+"</p>",n},renderAlert:function(t,n){var e=["success","error","notice"],i="";return(void 0===typeof t||o.inArray(t,e)<0)&&(t=e[0]),i+="success"===t?'<div class="alert alert-success">':"error"===t?'<div class="alert alert-danger">':'<div class="alert alert-warning">',i+='<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>',"error"===t&&(i+="<strong>Please fix the following errors:</strong>"),n=this.processMessageObject(n),i+n+"</div>"}}}(jQuery),leantony.modal=leantony.modal||{},function(o){"use strict";var t=function(t){var n={modal_id:"bootstrap_modal",notification_id:"modal-notification",form_id:"modal_form",modalTriggerSelector:".show_modal_form",onShown:function(o,t){},onHidden:function(t,n){o(this).removeData("bs.modal")},onShow:function(t,n){var e='<div class="row"><div class="col-md-12"><i class="fa fa-spinner fa-5x fa-spin text-info"></i></div></div>';o("#"+n.options.modal_id).find(".modal-content").html(e)},onLoaded:function(o,t){}};this.options=o.extend({},n,t||{})};t.prototype.show=function(){var t=this,n=t.options.modal_id,e=function(e){var i=o(e).data("modal-size");i&&o("#"+n).find(".modal-dialog").addClass(i);var a=o(e).attr("href"),s=o("#"+n);s.on("shown.bs.modal",function(){t.options.onShown.call(this,e,t)}).on("hidden.bs.modal",function(){t.options.onHidden.call(this,e,t)}).on("show.bs.modal",function(){t.options.onShow.call(this,e,t)}).on("loaded.bs.modal",function(){t.options.onLoaded.call(this,e,t)}).modal({remote:a,backdrop:"static",refresh:!0})};o(document.body).off("click.leantony.modal").on("click.leantony.modal",t.options.modalTriggerSelector,function(o){o.preventDefault(),e(this)})},t.prototype.submitForm=function(){var t=this,n=function(n){var e=o("#"+t.options.form_id),i=e.serialize(),a=e.attr("action"),s=e.attr("method")||"POST",r=o(n).html();o.ajax({type:s,url:a,data:i,dataType:"json",success:function(n){if(n.success){var e='<i class="fa fa-check"></i> ';e+=n.message,o("#"+t.options.notification_id).html(leantony.utils.renderAlert("success",e)),n.redirectTo?leantony.utils.loadLink(n.redirectTo,n.redirectTimeout||1e3):setTimeout(function(){o("#"+t.options.modal_id).modal("hide")},1e3)}else o("#"+t.options.notification_id).html(leantony.utils.renderAlert("error",n.message)),setTimeout(function(){o("#"+t.options.modal_id).modal("hide")},1e3)},beforeSend:function(){o(n).attr("disabled","disabled").html("Please wait....")},complete:function(){o(n).html(r).removeAttr("disabled")},error:function(n){var e;switch(n.status){case 500:e="A server error occurred...";break;default:e=leantony.utils.renderAlert("error",n.responseJSON)}o("#"+t.options.notification_id).html(e)}})};o("#"+t.options.modal_id).off("click.leantony.modal").on("click.leantony.modal","#"+t.options.form_id+' button[type="submit"]',function(o){o.preventDefault(),n(this)})},leantony.modal=function(o){var n=new t(o);n.show(),n.submitForm()}}(jQuery);